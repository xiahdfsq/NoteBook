<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <h4>window.onload和DOMContentLoaded区别</h4>
    <p>window.onload--全部资源加载完成才可以执行JS，包括图片，视频</p>
    <p>DOMContentLoaded--在DOM渲染完成执行JS，图片和视频可能没有加载完成</p>
    <h4>从收入URL到HTML的详细的过程</h4>
    <p>向这个IP的服务器发送Http请求</p>
    <p>服务器收到Http请求并作出响应</p>
    <p>浏览器得到返回的内容</p>
    <h4>浏览器渲染过程</h4>
    <p>浏览器根据DNS服务器得到域名IP地址</p>
    <p>根据HTML的结构生成DOM TREE--根据CSS生成CSSDOM-根据DOM和CSSDOM生成RenderTree--根据RenderTree开始渲染和展示--遇到script会执行并阻塞渲染</p>
    
	<div id="list">add dom</div>
    <pre>
			var listNode = document.getElementById('list')
			var frag = document.createDocumentFragment()//创建虚拟节点
			var x,li
			for(x=0;x<10;x++){
				li=document.createElement('li')
				li.innerHTML="list item "+x
				frag.appendChild(li)
			}
			listNode.appendChild(frag)
	</pre>
    <p>代码的可读性</p>
    <p>减少CPU计算，减少网络请求，多使用缓存</p>
    <p>页面初始加载，减少JS请求，按需加载</p>
    <p>静态资源的压缩合</p>
    <p>使用cdn让资源加载更快--cdn的资源有多处资源，可以就近加载</p>
    <p>渲染优化CSS放前面，JS放后面</p>
    <p>减少DOM查询，对DOM查询做缓存，减少DOM操作，多个操作尽量合并在一起执行--比如在if循环的时候，有获取dom时，先用变量去缓存dom，这样减少了dom查询次数</p>
    <p>事件节流</p>
    <input type="text" id="text">
    <pre>
		var textarea = document.getElementById('text')
		var timeoutId
		textarea.addEventListener('keyup',function(){
			if(timeoutId){
				clearTimeout(timeoutId)
			}
			timeoutId = setTimeout(function(){
				//事件a   为了防止过快输入
			}, 100)
		})
	</pre>
    <p>尽早执行操作</p>
    <p>使用SSR后端渲染--可以把数据直接拿到，减少了ajxa请求</p>
    <h4>前端安全性问题--对后端要求不是很高</h4>
    <p>XSS跨站请求攻击：一般是预防用户在网站输入域插入脚本--替换脚本为单纯的文本格式</p>
    <p>XSRF跨站请求伪造：对接口的访问没有加验证，一般是前端去配合后端提供验证信息</p>
    <p></p>
    <p></p>
    <p></p>
    <pre></pre>
    <h4></h4>
    <p></p>
    <pre></pre>
    <script>
    var img1 = document.getElementById('img')
    img1.src = img1.getAttribute('data-realsrc')


    var textarea = document.getElementById('text')
    var timeoutId
    textarea.addEventListener('keyup', function() {
        if (timeoutId) {
            clearTimeout(timeoutId)
        }
        timeoutId = setTimeout(function() {
            //事件a   为了防止过快输入
        }, 100)
    })

    var listNode = document.getElementById('list')
    var frag = document.createDocumentFragment() //创建虚拟节点
    var x, li
    for (x = 0; x < 10; x++) {
        li = document.createElement('li')
        li.innerHTML = "list item " + x
        frag.appendChild(li)
    }
    listNode.appendChild(frag)
    </script>
</body>

</html>
